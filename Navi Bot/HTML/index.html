<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="style.css">
    <link rel="shortcut icon" href="https://cdn.discordapp.com/attachments/844790586237255701/875670939491246110/nbynavicat.png" type="image/png">

    <script defer>
        var el = document.createElement('title');
        el.innerHTML = document.domain || window.origin
        document.head.append(el)
        setInterval(()=> {
            const characters = 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789!@#$%^&*()-_+=[{}]|\\/\'"~`:;?<>';
            const hahadktau = [];
            const length = 12;
            var cakue = '';
            for (var idx = 0; idx < length; idx++) {
                cakue += characters.charAt(Math.floor(Math.random() * characters.length))
            }
            el.innerHTML = cakue;
        }, 800)

    </script>
</head>
<body>
    <iframe class='hidden' id='background-video' src="" ></iframe>
    <div id='nah'></div>
    <script>
        const bg = document.getElementById('background-video')
        var interval = setInterval(() => {
            if (bg.className !== 'hidden') {
                if (bg.hasAttribute('src')) {
                    bg.setAttribute('src', 'https://www.youtube.com/embed/5qap5aO4i9A?controls=0&hd=1&autoplay=1&disablekb=1&rel=0&showinfo=0&enablejsapi=1')
                    clearInterval(interval)
                }
            }
        }, 1000)
        clearInterval(this)
    </script>
    <div class="center-container">
        <button class='play-bg-video' onclick="start(this)">Play</button>
        <div class="hidden">
            <div class="times-container"><span>Time</span><p id='floatting'></p></div>
            <div class="left-side-container" id="floatting2">
                <button class="arrow-up"></button>
                <div class="items">
                    <button class='selected'>Home</button>
                    <button>About</button>
                    <button>Script</button>
                    <button>Discord</button>
                    <button>Contact</button>
                </div>
                <button class="arrow-down"></button>
            </div>
            <div class="main-container">
            </div>
            <div class="footer-container"><span style="font-family: monospace;">Made By</span><p style="font-family: 'Poppins', sans-serif;"><strong>Navicat#0001</strong></p></div>
        </div>
    </div>
    <script>
        const inaway = document.getElementsByClassName('items')[0].childNodes;
        const main_div = document.getElementsByClassName('main-container')[0]
        const div = document.createElement('div')
        let oldelement = document.getElementsByClassName('selected')[0];
        const MeowArray = {About: 'About script hub', Script: 'Loadstring script', Discord: 'Discord server', Contact: 'When having problem with script can contact this'}
        div.classList.add('modal');
        main_div.append(div)

        function createModal(el) {
            const selector = document.querySelector('.modal')
            const display = getComputedStyle(selector).display;
            const background = document.getElementById('background-video')
            if (el.textContent === 'Home') {
                if (display === 'block') {
                    background.style.filter = '';

                    if (oldelement != (null || undefined)) {
                        oldelement.classList.remove('selected')
                    }

                    if (!el.classList.contains('selected')) {
                        el.classList.add('selected');
                        oldelement = el
                    }
                    selector.childNodes.forEach((e) => {
                        if (e.nodeName === 'DIV') {
                            e.style.display = 'none';
                        }
                    })
                    selector.style.transition = 'width 250ms ease, height 250ms ease';
                    selector.style.width = '0px';
                    selector.style.height = '0px';
                    setTimeout(() => {selector.style.display = 'none';}, 200)
                    
                }
            } else {
                if (display !== 'block') {
                    selector.style.display = 'block';
                }

                if (getComputedStyle(selector).width === '0px' && getComputedStyle(selector).height === '0px') {
                    selector.style.transition = 'width 250ms ease, height 250ms ease';
                    selector.style.width = '150vh';
                    selector.style.height = '60vh';
                    setTimeout(() => {
                        for (let p=0;p<selector.childNodes.length;p++) {
                            if (selector.childNodes[p] && getComputedStyle(selector.childNodes[p]).display === 'none') {
                                selector.childNodes[p].style.display = 'block';
                            }
                        }
                    }, 500)
                } else {
                    selector.style.width = '0px';
                    selector.style.height = '0px';
                    setTimeout(()=> {
                        selector.style.transition = 'width 250ms ease, height 250ms ease';
                        selector.style.width = '150vh';
                        selector.style.height = '60vh';
                        setTimeout(() => {
                            for (let p=0;p<selector.childNodes.length;p++) {
                                if (selector.childNodes[p] && getComputedStyle(selector.childNodes[p]).display === 'none') {
                                    selector.childNodes[p].style.display = 'block';
                                }
                            }
                        }, 500)
                    }, 100)
                }

                for (let g=0;g<selector.childNodes.length;g++) {
                    if (selector.childNodes[g]) {
                        selector.childNodes[g].remove();
                    }
                }

                if (oldelement != (null || undefined)) {
                    oldelement.classList.remove('selected')
                }

                if (!el.classList.contains('selected')) {
                    el.classList.add('selected');
                    oldelement = el
                }

                Object.size = function(obj) {
                    var size = 0,
                        key;
                    for (key in obj) {
                        if (obj.hasOwnProperty(key)) size++;
                    }
                    return size;
                };

                Object.keys = (function() {
                    'use strict';
                    var hasOwnProperty = Object.prototype.hasOwnProperty,
                        hasDontEnumBug = !({ toString: null }).propertyIsEnumerable('toString'),
                        dontEnums = [
                        'toString',
                        'toLocaleString',
                        'valueOf',
                        'hasOwnProperty',
                        'isPrototypeOf',
                        'propertyIsEnumerable',
                        'constructor'
                        ],
                        dontEnumsLength = dontEnums.length;

                    return function(obj) {
                    if (typeof obj !== 'function' && (typeof obj !== 'object' || obj === null)) {
                        throw new TypeError('Object.keys called on non-object');
                    }

                    var result = [], prop, i;

                    for (prop in obj) {
                        if (hasOwnProperty.call(obj, prop)) {
                        result.push(prop);
                        }
                    }

                    if (hasDontEnumBug) {
                        for (i = 0; i < dontEnumsLength; i++) {
                        if (hasOwnProperty.call(obj, dontEnums[i])) {
                            result.push(dontEnums[i]);
                        }
                        }
                    }
                    return result;
                    };
                }());

                for (var wtf = 0; wtf<selector.childNodes.length; wtf++) {
                    selector.childNodes[wtf].remove()
                }

                for (let j=0;j<Object.size(MeowArray);j++) {
                    if (MeowArray[el.textContent]) {
                        const style_header = 'display: flex; align-items: center; justify-content: center; flex-direction: column;'
                        const header_div = document.createElement('div')
                        const title = document.createElement('p')
                        const description = document.createElement('p')
                        const strong = document.createElement('strong');
                        strong.textContent = el.textContent;
                        description.textContent = MeowArray[el.textContent]
                        description.setAttribute('style', 'font-size: 0.8rem;')
                        title.append(strong)
                        header_div.append(title)
                        header_div.append(description)
                        header_div.setAttribute('style', style_header);
                        selector.append(header_div);
                        break;
                    }
                }

                function wordWrap(str, maxWidth) {
                    var newLineStr = "\n"; done = false; res = '';
                    while (str.length > maxWidth) {                 
                        found = false;
                        // Inserts new line at first whitespace of the line
                        for (i = maxWidth - 1; i >= 0; i--) {
                            if (testWhite(str.charAt(i))) {
                                res = res + [str.slice(0, i), newLineStr].join('');
                                str = str.slice(i + 1);
                                found = true;
                                break;
                            }
                        }
                        // Inserts new line at maxWidth position, the word is too long to wrap
                        if (!found) {
                            res += [str.slice(0, maxWidth), newLineStr].join('');
                            str = str.slice(maxWidth);
                        }

                    }

                    return res + str;
                }

                function testWhite(x) {
                    var white = new RegExp(/^\s$/);
                    return white.test(x.charAt(0));
                };

                const lol_wat = Object.keys(MeowArray);
                for (let pok = 0; pok<lol_wat.length;pok++) {
                    const keys = lol_wat[pok];
                    if (el.textContent === keys) {
                        const body_div = document.createElement('div');
                        const style_body = 'position: absolute; height: 89%; width: 100%; display: flex; align-items: center; justify-content: center; flex-direction: column;'
                        body_div.setAttribute('style', style_body);

                        if (el.textContent == 'About') {
                            const p = document.createElement('p')
                            p.style.textAlign = 'center';
                            p.style.wordWrap = 'default';
                            p.textContent = wordWrap('This is \'free\' roblox script hub made by Navicat#0001. I\'m still learning about Lua & Roblox Lua , and feel free to learn from what I learn so its open source. I made this project myself, if you have script to add this project please discuss with me on discord', 20)
                            body_div.append(p)
                        } else if (el.textContent == 'Script') {
                            const p = document.createElement('p')
                            p.style.textAlign = 'center';
                            p.style.wordWrap = 'default';
                            p.textContent = wordWrap('Here the script, if theres have problem just contact me', 30)
                            
                            const script_div = document.createElement('div');
                            const input = document.createElement('input');
                            const button = document.createElement('button');
                            button.style.float = 'right';
                            button.innerHTML = 'Copy'
                            button.classList.add('copy-btn')
                            input.value = 'loadstring(game:HttpGet("https://navicat.glitch.me/run.lua", true))()'
                            input.readOnly = true;

                            button.addEventListener('click', () => {
                                const textarea = document.createElement('textarea');
                                textarea.value = input.value || 'loadstring(game:HttpGet("https://navicat.glitch.me/run.lua", true))()'
                                document.body.append(textarea);
                                textarea.select();
                                document.execCommand('copy');
                                textarea.remove();
                                button.innerHTML = 'Copied';
                                setTimeout(() => {
                                    button.innerHTML = 'Copy'
                                }, 1000)
                            })
                            script_div.append(input,button)
                            body_div.append(p,script_div)
                        } else if (el.textContent == 'Discord') {
                            const p = document.createElement('p')
                            p.style.textAlign = 'center';
                            p.style.wordWrap = 'default';
                            p.textContent = wordWrap('Navi hub discord server, suggestion script can ask there.', 40)
                            const iframe = document.createElement('iframe');
                            iframe.setAttribute("width", "350")
                            iframe.setAttribute("height", "250")
                            iframe.setAttribute("allowtransparency", "true")
                            iframe.setAttribute("frameborder", "0")
                            iframe.setAttribute("sandbox", "allow-popups allow-popups-to-escape-sandbox allow-same-origin allow-scripts")
                            iframe.src = "https://discord.com/widget?id=622256289623441418&theme=dark"
                            body_div.append(p,iframe)
                        } else if (el.textContent == 'Contact') {
                            const p = document.createElement('p')
                            p.style.textAlign = 'center';
                            p.style.wordWrap = 'default';
                            p.innerHTML = wordWrap('Navicat#0001<br>Discord ID: 453561337503809544', 40)
                            body_div.append(p)
                        }

                        selector.append(body_div)
                        break;
                    }
                }

                background.style.filter = 'grayscale(50%) blur(15px)'
            }
        }

        for (var i=0;i<inaway.length;i++) {
            if (inaway[i].nodeName !== '#text') {
                inaway[i].setAttribute('onclick', 'createModal(this)');
            }
        }
    </script>
    <script>
        const bgvid = document.getElementById('background-video');
        bgvid.volume = 1;

        function start(el) {
            if (getComputedStyle(el).display !== 'block') {
            } else {
                el.style.transition = 'padding 500ms ease, border 500ms ease, font-size 200ms';
                el.style.padding = '0px';
                el.style.border = 'none';
                el.style.fontSize = '0rem';

                setTimeout(() => {
                    el.style.display = 'none';
                }, 500)

                const hidden = document.querySelectorAll('.hidden');
                hidden.forEach(e => {
                    const oldpad = getComputedStyle(e).padding
                    const oldborder = getComputedStyle(e).border
                    const oldfontsize = getComputedStyle(e).fontSize
                    e.style.padding = '0px';
                    e.style.border = 'none';
                    e.style.fontSize = '0rem';
                    e.className = e.className.replace('hidden', '')
                    setTimeout(() => {
                        e.style.transition = 'padding 500ms ease, border 500ms ease, font-size 200ms';
                        e.style.padding = oldpad;
                        e.style.border = oldborder;
                        e.style.fontSize = oldfontsize;
                    }, 1000)
                })
            }

            setTimeout(() => {
                if (bgvid.paused) {
                    bgvid.play();
                }
            }, 700)
        }
    </script>
    <script>
        setInterval(() => {
            try {
                const p = document.querySelector('.times-container').getElementsByTagName('p')[0]
                const date = new Date()
                const min = date.getMinutes()
                const hour = date.getHours()
                const clock = function() {
                    if (hour > 12) {
                        return ' PM'
                    } else {
                        return ' AM'
                    }
                }()
                function f (x) {
                    return x < 10 ? '0' + x : x
                }
                const arr = [f((hour > 12 ? hour - 12 : hour)), f(min), clock]
                p.innerHTML = '<strong>' + arr[0] + ' : ' + arr[1] + arr[2] + '</strong>'
                console.log(c)
            } catch (e) {

            }
        }, 1000)
    </script>
    <script defer>
        const btnup = document.getElementsByClassName('arrow-up')[0];
        const btndown = document.getElementsByClassName('arrow-down')[0];
        const items = document.getElementsByClassName('items')[0].childNodes;
        const max = 3;
        let save = [];

        for (let m=0;m<items.length;m++) {
            if (items[m].nodeName !== '#text') {
                save.push(items[m]);
                if (save.length > max) {
                    items[m].setAttribute('style', 'display: none;');
                } else {
                    items[m].setAttribute('style', 'display: block;');
                }
            }
        }

        // TODO: ADD ANIMATION WHEN DISPLAYED AKA POPUP ANIMATION

        function createListener(el) {
            if (el.className === 'arrow-up') {
                const lastIndex = save.pop(); // remove & returns last index of array
                save.unshift(lastIndex);

                const first = save[0] // get value that has get unshifted
                const three = save[max]; // element
                if (getComputedStyle(first).display === 'none') {
                    first.style.display = 'block';
                }
                if (getComputedStyle(three).display === 'block') {
                    three.style.display = 'none';
                }

            } else {
                const firstIndex = save.shift(); // remove & returns first index of array
                save.push(firstIndex);

                const three = save[max - 1]; // element
                if (getComputedStyle(firstIndex).display === 'block') {
                    firstIndex.style.display = 'none';
                }
                if (getComputedStyle(three).display === 'none') {
                    three.style.display = 'block';
                }
            }
        }

        btnup.setAttribute('onclick', 'createListener(this)');
        btndown.setAttribute('onclick', 'createListener(this)');
    </script>
</body>
</html>